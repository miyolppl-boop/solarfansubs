<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>SolarFansub</title>

<meta name="description" content="SolarFansub - TÃ¼rkÃ§e manhwa ve manga okuma sitesi.">
<meta name="robots" content="index, follow">
<link rel="icon" href="logo.png">

<style>
body{margin:0;font-family:Arial;background:#0b0b0b;color:#f5f5dc}
header{background:#000;padding:10px 15px;display:flex;justify-content:space-between;align-items:center}
h1{color:#f5d76e;font-size:20px;margin:0}
.menu-btn{font-size:22px;color:#f5d76e;cursor:pointer}
#menu{position:fixed;right:-260px;top:0;width:260px;height:100%;background:#111;padding:20px;transition:.3s}
#menu.active{right:0}
.menu-item{background:#1a1a1a;margin:6px 0;padding:10px;border-radius:6px;cursor:pointer}
.hidden{display:none}
#series,#reader{padding:20px}
.series-card{background:#151515;padding:10px;margin:10px 0;border-radius:6px}
.chapter{padding:6px;margin-top:5px;background:#222;border-radius:4px;cursor:pointer}
.new{color:#0f0;font-size:12px;margin-left:5px}
.read{color:#888;font-size:12px;margin-left:5px}
.page{width:100%;margin-bottom:10px}
.admin-btn{color:#f55;font-size:12px;margin-left:8px;cursor:pointer}
.like{color:#f5d76e;font-size:14px;margin-left:10px;cursor:pointer}
.count{font-size:12px;color:#aaa;margin-left:5px}
input,textarea,button{width:100%;margin-top:5px}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>

<body>

<header>
<h1 onclick="goHome()">SolarFansub</h1>
<div class="menu-btn" onclick="toggleMenu()">â˜°</div>
</header>

<div id="series"></div>
<div id="reader" class="hidden"></div>

<div id="menu">
<div id="loginBox">
<h3>Admin GiriÅŸi</h3>
<input id="email" placeholder="E-mail">
<input id="password" type="password" placeholder="Åifre">
<button onclick="login()">GiriÅŸ</button>
</div>

<div id="adminMenu" class="hidden">
<h3>YÃ¶netim</h3>
<input id="newSeries" placeholder="Yeni Seri">
<button onclick="addSeries()">â• Seri Ekle</button>

<hr>
<select id="seriesSelect"></select>
<input id="chapterTitle" placeholder="BÃ¶lÃ¼m AdÄ±">
<textarea id="pages" placeholder="Sayfa URLâ€™leri (her satÄ±r bir resim)"></textarea>
<button onclick="addChapter()">ğŸ“š BÃ¶lÃ¼m Ekle</button>

<button onclick="logout()">ğŸšª Ã‡Ä±kÄ±ÅŸ</button>
</div>
</div>

<script>
const firebaseConfig={
 apiKey:"BURAYA",
 authDomain:"BURAYA",
 projectId:"BURAYA"
};
firebase.initializeApp(firebaseConfig);

const auth=firebase.auth();
const db=firebase.firestore();

const seriesDiv=document.getElementById("series");
const reader=document.getElementById("reader");

function toggleMenu(){menu.classList.toggle("active")}
function goHome(){reader.classList.add("hidden");seriesDiv.classList.remove("hidden")}

auth.onAuthStateChanged(u=>{
 if(u){loginBox.classList.add("hidden");adminMenu.classList.remove("hidden")}
 else{loginBox.classList.remove("hidden");adminMenu.classList.add("hidden")}
});

function login(){
 auth.signInWithEmailAndPassword(email.value,password.value)
 .catch(()=>alert("HatalÄ± giriÅŸ"))
}
function logout(){auth.signOut()}

function addSeries(){
 db.collection("series").add({title:newSeries.value,created:Date.now()});
 newSeries.value="";
 loadSeries();
}

function addChapter(){
 const pagesArr=pages.value.split("\n");
 db.collection("series").doc(seriesSelect.value)
 .collection("chapters").add({
  title:chapterTitle.value,
  pages:pagesArr,
  created:Date.now(),
  views:0,
  likes:[]
 });
 chapterTitle.value="";pages.value="";
}

function loadSeries(){
 seriesDiv.innerHTML="";
 seriesSelect.innerHTML="";
 db.collection("series").get().then(snap=>{
  snap.forEach(doc=>{
   seriesSelect.innerHTML+=`<option value="${doc.id}">${doc.data().title}</option>`;
   const s=document.createElement("div");
   s.className="series-card";
   s.innerHTML=`<b>${doc.data().title}</b>`;
   s.onclick=()=>loadChapters(doc.id);
   seriesDiv.appendChild(s);
  });
 });
}

function loadChapters(id){
 seriesDiv.innerHTML="";
 db.collection("series").doc(id).collection("chapters")
 .orderBy("created","desc").get().then(snap=>{
  snap.forEach(c=>{
   const d=c.data();
   const ch=document.createElement("div");
   ch.className="chapter";
   ch.innerHTML=`
    <b contenteditable="${!!auth.currentUser}" 
    onblur="editTitle('${id}','${c.id}',this.innerText)">
    ${d.title}</b>
    <span class="count">ğŸ‘ ${d.views||0}</span>
    <span class="like" onclick="like('${id}','${c.id}')">â­ ${d.likes?.length||0}</span>
    ${auth.currentUser?`<span class="admin-btn" onclick="del('${id}','${c.id}')">ğŸ—‘ï¸</span>`:""}
   `;
   ch.onclick=()=>openChapter(id,c.id);
   seriesDiv.appendChild(ch);
  });
 });
}

function editTitle(s,c,t){
 db.collection("series").doc(s).collection("chapters").doc(c).update({title:t});
}

function del(s,c){
 if(confirm("Silinsin mi?")){
  db.collection("series").doc(s).collection("chapters").doc(c).delete();
  loadSeries();
 }
}

function like(s,c){
 if(!auth.currentUser)return alert("GiriÅŸ yap");
 const ref=db.collection("series").doc(s).collection("chapters").doc(c);
 ref.get().then(d=>{
  const likes=d.data().likes||[];
  if(!likes.includes(auth.currentUser.uid)){
   ref.update({likes:[...likes,auth.currentUser.uid]});
  }
 });
}

function openChapter(s,c){
 reader.innerHTML="";reader.classList.remove("hidden");seriesDiv.classList.add("hidden");
 const ref=db.collection("series").doc(s).collection("chapters").doc(c);
 ref.update({views:firebase.firestore.FieldValue.increment(1)});
 ref.get().then(d=>{
  d.data().pages.forEach(p=>{
   const img=document.createElement("img");
   img.src=p;img.className="page";reader.appendChild(img);
  });
 });
}

loadSeries();
</script>

</body>
</html>
