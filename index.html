<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>SolarFansub</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Arial;background:#0c0c0c;color:#eee}
header{background:#000;padding:12px 16px;display:flex;justify-content:space-between;align-items:center}
.logo{color:#f5d76e;font-size:20px;font-weight:bold;cursor:pointer}
input,textarea,button{padding:8px;border-radius:6px;border:none;width:100%;margin:4px 0}
button{background:#f5d76e;color:#000;cursor:pointer}
.container{padding:16px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:15px}
.card{background:#151515;border-radius:8px;padding:10px;text-align:center;cursor:pointer}
.card img{width:100%;height:230px;object-fit:cover;border-radius:6px}
.hidden{display:none}
.star{font-size:22px;color:#444;cursor:pointer}
.star.active{color:#f5d76e}
.chapter{background:#1f1f1f;padding:10px;border-radius:6px;margin:6px 0;cursor:pointer}
.reader img{width:100%;margin-bottom:10px}
.admin-box{position:fixed;right:10px;bottom:10px;background:#111;padding:10px;border-radius:8px;width:260px}
.admin-panel{background:#111;padding:15px;border-radius:8px;margin-top:10px}
</style>
</head>

<body>

<header>
<div class="logo" onclick="goHome()">SolarFansub</div>
<input id="search" placeholder="Seri ara..." oninput="renderSeries()">
</header>

<div id="home" class="container"></div>
<div id="detail" class="container hidden"></div>
<div id="reader" class="container hidden reader"></div>

<!-- ADMIN LOGIN -->
<div class="admin-box" id="adminLoginBox">
<input id="adminPass" type="password" placeholder="Admin ÅŸifre">
<button onclick="adminLogin()">Admin GiriÅŸ</button>
</div>

<!-- ADMIN PANEL -->
<div class="container hidden" id="adminPanel">
<h2>Admin Paneli</h2>

<input id="sTitle" placeholder="Seri adÄ±">
<input id="sCoverFile" type="file" accept="image/*">
<textarea id="sDesc" placeholder="AÃ§Ä±klama"></textarea>
<input id="sGenres" placeholder="TÃ¼rler (virgÃ¼lle)">
<button onclick="addSeries()">âž• Seri Ekle</button>

<hr>

<select id="seriesSelect"></select>
<input id="cTitle" placeholder="BÃ¶lÃ¼m adÄ±">
<textarea id="cPages" placeholder="Sayfa URL'leri (her satÄ±r 1 resim)"></textarea>
<button onclick="addChapter()">ðŸ“š BÃ¶lÃ¼m Ekle</button>

<button onclick="logout()">ðŸšª Admin Ã‡Ä±kÄ±ÅŸ</button>
</div>

<script>
const ADMIN_PASSWORD="alamuzpulums&129qam";
let isAdmin=false;

let data=JSON.parse(localStorage.getItem("DATA")) || { series:[] };
function save(){localStorage.setItem("DATA",JSON.stringify(data));}

function goHome(){
detail.classList.add("hidden");
reader.classList.add("hidden");
home.classList.remove("hidden");
renderSeries();
}

function renderSeries(){
home.innerHTML="";
const q=search.value.toLowerCase();
home.innerHTML=`<div class="grid">${
data.series.filter(s=>s.title.toLowerCase().includes(q))
.map(s=>`
<div class="card" onclick="openSeries(${s.id})">
<img src="${s.cover}">
<b>${s.title}</b>
</div>`).join("")
}</div>`;
}

function openSeries(id){
const s=data.series.find(x=>x.id===id);
s.views++; save();

home.classList.add("hidden");
detail.classList.remove("hidden");

const avg=s.rating.length?(s.rating.reduce((a,b)=>a+b,0)/s.rating.length).toFixed(1):"0";

detail.innerHTML=`
<h2>${s.title}</h2>
<img src="${s.cover}" style="max-width:250px">
<p>${s.desc}</p>
<p><b>TÃ¼rler:</b> ${s.genres.join(", ")}</p>
<p><b>GÃ¶rÃ¼ntÃ¼lenme:</b> ${s.views}</p>

<div>
${[1,2,3,4,5].map(i=>`<span class="star ${avg>=i?'active':''}" onclick="rate(${id},${i})">â˜…</span>`).join("")}
<b>${avg}</b>
</div>

<h3>BÃ¶lÃ¼mler</h3>
${s.chapters.map(c=>`
<div class="chapter" onclick="openChapter(${id},${c.id})">
${c.title} (${c.views})
</div>`).join("")}

<div id="disqus_thread"></div>
`;
loadDisqus(id);
}

function rate(id,val){
const s=data.series.find(x=>x.id===id);
s.rating.push(val);
save();
openSeries(id);
}

function openChapter(sid,cid){
const s=data.series.find(x=>x.id===sid);
const c=s.chapters.find(x=>x.id===cid);
c.views++; save();

detail.classList.add("hidden");
reader.classList.remove("hidden");
reader.innerHTML=c.pages.map(p=>`<img src="${p}">`).join("");
}

function adminLogin(){
if(adminPass.value===ADMIN_PASSWORD){
isAdmin=true;
adminLoginBox.classList.add("hidden");
adminPanel.classList.remove("hidden");
updateSeriesSelect();
alert("Admin modu aktif");
}else alert("HatalÄ± ÅŸifre");
}

function logout(){
isAdmin=false;
adminPanel.classList.add("hidden");
adminLoginBox.classList.remove("hidden");
}

function addSeries(){
const file=document.getElementById("sCoverFile").files[0];
if(!file) return alert("Kapak seÃ§");

const reader=new FileReader();
reader.onload=function(e){
const s={
id:Date.now(),
title:sTitle.value,
cover:e.target.result,
desc:sDesc.value,
genres:sGenres.value.split(","),
rating:[],
views:0,
chapters:[]
};
data.series.push(s);
save();
updateSeriesSelect();
renderSeries();
};
reader.readAsDataURL(file);
}

function updateSeriesSelect(){
seriesSelect.innerHTML=data.series.map(s=>`<option value="${s.id}">${s.title}</option>`).join("");
}

function addChapter(){
const s=data.series.find(x=>x.id==seriesSelect.value);
s.chapters.push({
id:Date.now(),
title:cTitle.value,
pages:cPages.value.split("\n"),
views:0
});
save();
alert("BÃ¶lÃ¼m eklendi");
}

function loadDisqus(id){
window.disqus_config=function(){this.page.identifier=id;}
let d=document,s=d.createElement("script");
s.src="https://YOUR_SHORTNAME.disqus.com/embed.js";
s.setAttribute("data-timestamp",+new Date());
(d.head||d.body).appendChild(s);
}

renderSeries();
</script>

</body>
</html>
